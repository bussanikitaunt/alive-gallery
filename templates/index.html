{% extends "base.html" %}

{% block content %}
<main class="layout-main layout-main-gallery">


  {# ===================== PAGE HEADER ===================== #}
  <section class="page-header">
    <h1 class="page-title">All entries</h1>
    <p class="page-subtitle">
      Your paintings, memories, diary notes, and moments.
    </p>
  </section>

  {# ===================== MAIN GALLERY GRID ===================== #}
  {% if entries and entries|length > 0 %}
  <section class="section-block">
    <h2 class="section-title-sm">Gallery</h2>
    <div class="cards">
      {% for e in entries %}
        {% include "partials/card.html" %}
      {% endfor %}
    </div>
  </section>
  
  {% else %}
    <section class="gallery-header">
      <h2 class="section-title">Gallery</h2>
      <p class="section-subtitle">
        No entries yet. Start by adding your first memory or painting.
      </p>
    </section>
  {% endif %}

  {# ===================== RECENT REFLECTIONS ===================== #}
  {% if reflections and reflections|length > 0 %}
    <section class="reflection-section fade-in">
      <article class="dream-card">

        <div class="section-title-row">
          <h2 class="section-title">Recent reflections</h2>
          <a href="{{ url_for('daily_reflection') }}" class="home-card-link">
            Open reflection journal â†’
          </a>
        </div>

        <p class="section-subtitle">
          Your latest <strong>Daily reflection</strong> notes, in one cozy row.
        </p>

        <ul class="reflection-list">
          {% for r in reflections %}
            <li class="reflection-card">
              <a href="{{ url_for('entry_detail', entry_id=r.id) }}" class="reflection-link">
                <div class="reflection-title-row">
                  <span class="reflection-emoji">ðŸ““</span>
                  <span class="reflection-title">
                    {{ r.title }}
                  </span>
                </div>

                <div class="reflection-meta">
                  <span class="reflection-date">{{ r.date }}</span>
                  {% if r.mood %}
                    <span class="reflection-mood">{{ r.mood }}</span>
                  {% endif %}
                </div>

                {% if r.notes %}
                  <p class="reflection-snippet">
                    {{ r.notes[:140] }}{% if r.notes|length > 140 %}â€¦{% endif %}
                  </p>
                {% endif %}
              </a>
            </li>
          {% endfor %}
        </ul>

      </article>
    </section>
  {% endif %}

  {# ===================== DREAMS & GOALS STRIP ===================== #}
  {% if dream_entries and dream_entries|length > 0 %}
    <section class="dreams-section fade-in">
      <div class="section-title-row">
        <h2 class="section-title">Dreams &amp; goals</h2>
        <a href="{{ url_for('dreamboard') }}" class="home-card-link">
          Open dreamboard â†’
        </a>
      </div>

      <p class="section-subtitle">
        A quick snapshot of the long-term dreams and goals youâ€™re tracking.
      </p>

      {# show up to 5 dreams in this summary strip #}
      {% set dreams = dream_entries[:5] %}

      <ul class="reflection-list">
        {% for d in dreams %}
          <li class="reflection-card">
            <div class="reflection-title-row">
              <span class="reflection-emoji">ðŸŽ¯</span>
              <span class="reflection-title">
                {{ d.title }}
              </span>
            </div>

            <div class="reflection-meta">
              {% if d.dream_theme %}
                <span class="reflection-date">{{ d.dream_theme }}</span>
              {% endif %}
              {% if d.dream_priority %}
                <span class="reflection-mood">{{ d.dream_priority }} priority</span>
              {% endif %}
              {% if d.dream_target_date %}
                <span class="reflection-date">
                  Target {{ d.dream_target_date }}
                </span>
              {% endif %}
            </div>

            {% if d.notes %}
              <p class="reflection-snippet">
                {{ d.notes[:140] }}{% if d.notes|length > 140 %}â€¦{% endif %}
              </p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}

</main>
{% endblock %}
