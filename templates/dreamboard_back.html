{% extends "base.html" %}
{% block content %}

<section class="dreamboard-hero">
  <h1 class="hero-title handwritten">Dreamboard</h1>
  <p class="hero-subtitle">
    A soft place to pin your <strong>goals, wishes, and future memories</strong>.
  </p>

  <div class="home-actions">
    <a class="btn primary" href="{{ url_for('new_dream') }}">â• Add a dream</a>
    <a class="btn secondary" href="{{ url_for('index') }}">ğŸ—‚ View all entries</a>
  </div>

  <p class="section-subtitle dream-tip">
    Tip: Use a collection like <em>Goals</em> or tags such as
    <code>dream</code>, <code>goal</code>, or <code>manifest</code>
    to make entries show up here.
  </p>
</section>

{% if entries %}

  <!-- Filters -->
  <section class="dreamboard-filters">
    <div class="filter-group">
      <span class="filter-label">Theme:</span>
      <a href="{{ url_for('dreamboard') }}"
         class="filter-pill {% if not current_theme %}filter-pill-active{% endif %}">
        All
      </a>
      {% for t in themes %}
        <a href="{{ url_for('dreamboard', theme=t, priority=current_priority) }}"
           class="filter-pill {% if current_theme == t %}filter-pill-active{% endif %}">
          {{ t }}
        </a>
      {% endfor %}
    </div>

    <div class="filter-group">
      <span class="filter-label">Priority:</span>
      <a href="{{ url_for('dreamboard', theme=current_theme) }}"
         class="filter-pill {% if not current_priority %}filter-pill-active{% endif %}">
        All
      </a>
      {% for p in priorities %}
        <a href="{{ url_for('dreamboard', theme=current_theme, priority=p) }}"
           class="filter-pill {% if current_priority == p %}filter-pill-active{% endif %}">
          {{ p }}
        </a>
      {% endfor %}
    </div>
  </section>

  <!-- Card grid dreamboard -->
  <section class="dream-grid">
    {% for e in entries %}
      <article class="dream-card">
        <a href="{{ url_for('entry_detail', entry_id=e.id) }}" class="dream-summary-link">

          {# Image or cute placeholder #}
          {% if e.image_path %}
            <img
              src="{{ url_for('static', filename=e.image_path) }}"
              alt="{{ e.title }}"
              class="dream-image"
            >
          {% else %}
            <div class="dream-image placeholder">
              {% if e.dream_theme == "Travel" %}
                âœˆï¸
              {% elif e.dream_theme == "Career" %}
                ğŸ¯
              {% elif e.dream_theme == "Art" %}
                ğŸ¨
              {% elif e.dream_theme == "Wellbeing" %}
                ğŸ§˜â€â™€ï¸
              {% else %}
                ğŸŒ±
              {% endif %}
            </div>
          {% endif %}

          <div class="dream-body">
            <div class="dream-title-row">
              <h2 class="dream-title handwritten">{{ e.title }}</h2>

              {% if e.dream_priority %}
                <span class="priority-pill priority-{{ e.dream_priority|lower }}">
                  {{ e.dream_priority }}
                </span>
              {% endif %}
            </div>

            {% if e.dream_theme %}
              <div class="dream-theme">
                {% if e.dream_theme == "Travel" %}
                  âœˆï¸
                {% elif e.dream_theme == "Career" %}
                  ğŸ¯
                {% elif e.dream_theme == "Art" %}
                  ğŸ–¼ï¸
                {% elif e.dream_theme == "Wellbeing" %}
                  ğŸ§˜â€â™€ï¸
                {% else %}
                  ğŸŒ±
                {% endif %}
                {{ e.dream_theme }}
              </div>
            {% endif %}

            {% if e.dream_target_date %}
              <div class="dream-timeline">
                Target: {{ e.dream_target_date }}
              </div>
            {% elif e.date %}
              <div class="dream-timeline">
                Created: {{ e.date }}
              </div>
            {% endif %}

            {% if e.dream_progress %}
              <div class="dream-progress">
                <div class="dream-progress-bar">
                  <div
                    class="dream-progress-fill"
                    style="width: {{ e.dream_progress }}%;"
                  ></div>
                </div>
                <span class="dream-progress-label">{{ e.dream_progress }}%</span>
              </div>
            {% endif %}

            {% if e.notes %}
              <p class="dream-summary-notes">
                {{ e.notes[:140] }}{% if e.notes|length > 140 %}â€¦{% endif %}
              </p>
            {% endif %}

            {% if e.tags %}
              <div class="dream-tags">
                {% for t in e.tags %}
                  <span class="dream-tag
                    {% if t|lower in ['dream', 'goal', 'goals', 'manifest', 'manifestation'] %}
                      dream-tag-manifest
                    {% endif %}">
                    #{{ t }}
                  </span>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </a>
      </article>
    {% endfor %}
  </section>

{% else %}
  <section class="dream-empty">
    <p>Your dreamboard is empty for now.</p>
    <p>Start by creating a dream or goal and tagging it with
      <code>dream</code>, <code>goal</code>, or <code>manifest</code>.
    </p>
    <a class="btn primary" href="{{ url_for('new_dream') }}">Start your first dream âœ¨</a>
  </section>
{% endif %}

{% endblock %}
